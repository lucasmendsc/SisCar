--USUARIOS
CREATE TABLE USUARIOS
(
  LOGIN       VARCHAR(20) PRIMARY KEY,
  NOME        VARCHAR(50) NOT NULL,
  SENHA       VARCHAR(10),
  SN_ATIVO    VARCHAR(1)
);

--USUARIOS_CONFIG
CREATE TABLE USUARIOS_CONFIG
(
  LOGIN       		VARCHAR(20),  
  PLANO_DE_FUNDO       	VARCHAR(1),
  DS_CONFIG   		VARCHAR(100),
  VALOR       		VARCHAR(100)
);

ALTER TABLE USUARIOS_CONFIG ADD CONSTRAINT PK_USUARIOS_CONFIG PRIMARY KEY (LOGIN);
ALTER TABLE USUARIOS_CONFIG ADD CONSTRAINT FK_USUARIOS_CONFIGUSUARIOS FOREIGN KEY (LOGIN) REFERENCES USUARIOS (LOGIN);

--CLIENTES
CREATE TABLE CLIENTES
(
  COD_CLIENTE INTEGER    PRIMARY KEY,
  NOME        VARCHAR(50) NOT NULL,
  CPF         VARCHAR(14) NOT NULL,
  DATA_NASC   DATE,
  ENDERECO    VARCHAR(80),
  BAIRRO      VARCHAR(50),
  CEP         VARCHAR(10),
  CIDADE      VARCHAR(50),
  ESTADO      VARCHAR(2),
  FONE1       VARCHAR(14),
  FONE2       VARCHAR(14),
  SEXO        VARCHAR(1),
  RESTRICAO   VARCHAR(1)
);

--MARCAS
CREATE TABLE MARCAS
(
  COD_MARCA   INTEGER    PRIMARY KEY,
  DS_MARCA    VARCHAR(30) NOT NULL
);

--MODELOS
CREATE TABLE MODELOS
(
  COD_MARCA   INTEGER, 
  COD_MODELO  INTEGER, 
  DS_MODELO   VARCHAR(30) NOT NULL
);

ALTER TABLE MODELOS ADD CONSTRAINT PK_MODELOS PRIMARY KEY (COD_MARCA, COD_MODELO);
ALTER TABLE MODELOS ADD CONSTRAINT FK_MODELOSMARCAS FOREIGN KEY (COD_MARCA) REFERENCES MARCAS (COD_MARCA);

--MOV_VEICULOS
CREATE TABLE MOV_VEICULOS
(
  COD_MOV_VEICULOS    INTEGER PRIMARY KEY,
  COD_MARCA           INTEGER,
  COD_MODELO          INTEGER,
  VERSAO              VARCHAR(20),
  ANO_FABRICACAO      INTEGER,
  ANO_MODELO          INTEGER,
  COR                 VARCHAR(20),
  PLACA               VARCHAR(8),
  RENAVAM             VARCHAR(10),
  OBSERVACOES         VARCHAR(500),
  VALOR_ENTRADA       NUMERIC(10,2),
  VALOR_SAIDA         NUMERIC(10,2),
  DATA_ENTRADA        DATE,
  DATA_SAIDA          DATE,  
  COD_CLIENTE_ENTRADA INTEGER,  
  COD_CLIENTE_SAIDA   INTEGER  
);  

ALTER TABLE MOV_VEICULOS ADD CONSTRAINT FK_MOV_VEICULOSMODELOS   FOREIGN KEY (COD_MARCA, COD_MODELO) REFERENCES MODELOS (COD_MARCA, COD_MODELO);
ALTER TABLE MOV_VEICULOS ADD CONSTRAINT FK_MOV_VEICULOSCLIENTES1 FOREIGN KEY (COD_CLIENTE_ENTRADA)   REFERENCES CLIENTES (COD_CLIENTE);
ALTER TABLE MOV_VEICULOS ADD CONSTRAINT FK_MOV_VEICULOSCLIENTES2 FOREIGN KEY (COD_CLIENTE_SAIDA)     REFERENCES CLIENTES (COD_CLIENTE);

-- Table: gastos_veiculos

-- DROP TABLE gastos_veiculos;

CREATE TABLE gastos_veiculos
(
  id serial NOT NULL,
  descricao character varying(255) NOT NULL,
  responsavel character varying(255) NOT NULL,
  data date NOT NULL,
  valor double precision NOT NULL,
  veiculoid integer,
  CONSTRAINT gastos_veiculos_pkey PRIMARY KEY (id),
  CONSTRAINT gastos_veiculos_veiculoid_fkey FOREIGN KEY (veiculoid)
      REFERENCES mov_veiculos (cod_mov_veiculos) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)


INSERT INTO USUARIOS VALUES ('ADMIN','Administrador','963','S');
INSERT INTO USUARIOS_CONFIG VALUES ('ADMIN',NULL,'Papel de Parede e Cor',NULL);



insert into MARCAS (COD_MARCA, DS_MARCA)
values (1, 'FIAT');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (2, 'VOLKSWAGEN');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (3, 'CHEVROLET');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (4, 'FORD');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (5, 'RENAULT');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (6, 'NISSAN');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (7, 'HONDA');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (8, 'HYUNDAI');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (9, 'CITROEN');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (10, 'TOYOTA');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (11, 'PEUGEOT');

insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (2, 1, 'GOL');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (1, 2, 'UNO');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (1, 3, 'PALIO');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (2, 4, 'FOX');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (4, 5, 'FIESTA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (1, 6, 'STRADA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 7, 'CELTA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (5, 8, 'SANDERO');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 9, 'CORSA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (2, 10, 'VOYAGE');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (2, 11, 'SAVEIRO');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (1, 12, 'SIENA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 13, 'COBALT');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (10, 14, 'COROLLA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 15, 'AGILE');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 16, 'MONTANA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 17, 'S10');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (7, 18, 'CIVIC');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (4, 19, 'KA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 20, 'CRUZE');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (5, 21, 'DUSTER');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (4, 22, 'ECOSPORT');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (2, 23, 'FUSCA');


COMMIT;



 
