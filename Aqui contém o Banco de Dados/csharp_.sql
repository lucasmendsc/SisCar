--USUARIOS
CREATE TABLE USUARIOS
(
  LOGIN       VARCHAR(20) PRIMARY KEY,
  NOME        VARCHAR(50) NOT NULL,
  SENHA       VARCHAR(10),
  SN_ATIVO    VARCHAR(1)
);

--USUARIOS_CONFIG
CREATE TABLE USUARIOS_CONFIG
(
  LOGIN       		VARCHAR(20),  
  PLANO_DE_FUNDO       	VARCHAR(1),
  DS_CONFIG   		VARCHAR(100),
  VALOR       		VARCHAR(100)
);

ALTER TABLE USUARIOS_CONFIG ADD CONSTRAINT PK_USUARIOS_CONFIG PRIMARY KEY (LOGIN);
ALTER TABLE USUARIOS_CONFIG ADD CONSTRAINT FK_USUARIOS_CONFIGUSUARIOS FOREIGN KEY (LOGIN) REFERENCES USUARIOS (LOGIN);

--CLIENTES
CREATE TABLE CLIENTES
(
  COD_CLIENTE INTEGER    PRIMARY KEY,
  NOME        VARCHAR(50) NOT NULL,
  CPF         VARCHAR(14) NOT NULL,
  DATA_NASC   DATE,
  ENDERECO    VARCHAR(80),
  BAIRRO      VARCHAR(50),
  CEP         VARCHAR(10),
  CIDADE      VARCHAR(50),
  ESTADO      VARCHAR(2),
  FONE1       VARCHAR(14),
  FONE2       VARCHAR(14),
  SEXO        VARCHAR(1),
  RESTRICAO   VARCHAR(1)
);

--MARCAS
CREATE TABLE MARCAS
(
  COD_MARCA   INTEGER    PRIMARY KEY,
  DS_MARCA    VARCHAR(30) NOT NULL
);

--MODELOS
CREATE TABLE MODELOS
(
  COD_MARCA   INTEGER, 
  COD_MODELO  INTEGER, 
  DS_MODELO   VARCHAR(30) NOT NULL
);

ALTER TABLE MODELOS ADD CONSTRAINT PK_MODELOS PRIMARY KEY (COD_MARCA, COD_MODELO);
ALTER TABLE MODELOS ADD CONSTRAINT FK_MODELOSMARCAS FOREIGN KEY (COD_MARCA) REFERENCES MARCAS (COD_MARCA);

--MOV_VEICULOS
CREATE TABLE MOV_VEICULOS
(
  COD_MOV_VEICULOS    INTEGER PRIMARY KEY,
  COD_MARCA           INTEGER,
  COD_MODELO          INTEGER,
  VERSAO              VARCHAR(20),
  ANO_FABRICACAO      INTEGER,
  ANO_MODELO          INTEGER,
  COR                 VARCHAR(20),
  PLACA               VARCHAR(8),
  RENAVAM             VARCHAR(10),
  OBSERVACOES         VARCHAR(500),
  VALOR_ENTRADA       NUMERIC(10,2),
  VALOR_SAIDA         NUMERIC(10,2),
  DATA_ENTRADA        DATE,
  DATA_SAIDA          DATE,  
  COD_CLIENTE_ENTRADA INTEGER,  
  COD_CLIENTE_SAIDA   INTEGER  
);  

ALTER TABLE MOV_VEICULOS ADD CONSTRAINT FK_MOV_VEICULOSMODELOS   FOREIGN KEY (COD_MARCA, COD_MODELO) REFERENCES MODELOS (COD_MARCA, COD_MODELO);
ALTER TABLE MOV_VEICULOS ADD CONSTRAINT FK_MOV_VEICULOSCLIENTES1 FOREIGN KEY (COD_CLIENTE_ENTRADA)   REFERENCES CLIENTES (COD_CLIENTE);
ALTER TABLE MOV_VEICULOS ADD CONSTRAINT FK_MOV_VEICULOSCLIENTES2 FOREIGN KEY (COD_CLIENTE_SAIDA)     REFERENCES CLIENTES (COD_CLIENTE);

-- Table: gastos_veiculos

-- DROP TABLE gastos_veiculos;

CREATE TABLE gastos_veiculos
(
  id serial NOT NULL,
  descricao character varying(255) NOT NULL,
  responsavel character varying(255) NOT NULL,
  data date NOT NULL,
  valor double precision NOT NULL,
  veiculoid integer,
  CONSTRAINT gastos_veiculos_pkey PRIMARY KEY (id),
  CONSTRAINT gastos_veiculos_veiculoid_fkey FOREIGN KEY (veiculoid)
      REFERENCES mov_veiculos (cod_mov_veiculos) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)

INSERT INTO USUARIOS VALUES ('ADMIN','Administrador','123','S');
INSERT INTO USUARIOS_CONFIG VALUES ('ADMIN',NULL,'Papel de Parede e Cor',NULL);

insert into CLIENTES (COD_CLIENTE, NOME, CPF, DATA_NASC, ENDERECO, BAIRRO, CEP, CIDADE, ESTADO, FONE1, FONE2, SEXO, RESTRICAO)
values (1, 'ANTONIO DA COSTA E SILVA', '111.111.111-11', to_date('16-05-1975', 'dd-mm-yyyy'), 'AVENIDA TANCREDO NEVES, 989', 'IPIRANGA', '11.111-111', 'BELO HORIZONTE', 'MG', '(11) 1111-1111', '(11) 1111-1111', 'M', 'N');
insert into CLIENTES (COD_CLIENTE, NOME, CPF, DATA_NASC, ENDERECO, BAIRRO, CEP, CIDADE, ESTADO, FONE1, FONE2, SEXO, RESTRICAO)
values (2, 'JOSE DA SILVA', '111.111.111-11', to_date('01-04-1960', 'dd-mm-yyyy'), 'RUA 12 DE SETEMBRO', 'CENTRO', '14.620-000', 'SAO PAULO', 'SP', '(11) 1111-1111', '(11) 1111-1111', 'M', 'N');
insert into CLIENTES (COD_CLIENTE, NOME, CPF, DATA_NASC, ENDERECO, BAIRRO, CEP, CIDADE, ESTADO, FONE1, FONE2, SEXO, RESTRICAO)
values (3, 'JOAQUIM HONORIO', '111.111.111-11', to_date('01-05-1970', 'dd-mm-yyyy'), 'RUA PIAUI, 373', 'VILA ABRANCHES', '11.111-111', 'SAO PAULO ', 'SP', '(11) 1111-1111', '(11) 1111-1111', 'M', 'N');
insert into CLIENTES (COD_CLIENTE, NOME, CPF, DATA_NASC, ENDERECO, BAIRRO, CEP, CIDADE, ESTADO, FONE1, FONE2, SEXO, RESTRICAO)
values (4, 'MARIA DE LOURDES DA SILVA', '111.111.111-11', to_date('01-05-1978', 'dd-mm-yyyy'), 'RUA DAS FLORES, 999', 'VILA EUSTAQUIO', '11.111-111', 'CAMPINAS', 'SP', '(11) 1111-1111', '(11) 1111-1111', 'F', 'N');

insert into MARCAS (COD_MARCA, DS_MARCA)
values (1, 'FIAT');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (2, 'VOLKSWAGEN');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (3, 'CHEVROLET');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (4, 'FORD');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (5, 'RENAULT');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (6, 'NISSAN');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (7, 'HONDA');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (8, 'HYUNDAI');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (9, 'CITROEN');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (10, 'TOYOTA');
insert into MARCAS (COD_MARCA, DS_MARCA)
values (11, 'PEUGEOT');

insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (2, 1, 'GOL');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (1, 2, 'UNO');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (1, 3, 'PALIO');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (2, 4, 'FOX');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (4, 5, 'FIESTA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (1, 6, 'STRADA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 7, 'CELTA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (5, 8, 'SANDERO');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 9, 'CORSA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (2, 10, 'VOYAGE');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (2, 11, 'SAVEIRO');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (1, 12, 'SIENA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 13, 'COBALT');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (10, 14, 'COROLLA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 15, 'AGILE');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 16, 'MONTANA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 17, 'S10');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (7, 18, 'CIVIC');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (4, 19, 'KA');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (3, 20, 'CRUZE');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (5, 21, 'DUSTER');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (4, 22, 'ECOSPORT');
insert into MODELOS (COD_MARCA, COD_MODELO, DS_MODELO)
values (2, 23, 'FUSCA');

insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (1, 2, 1, '1.0', 2010, 2011, 'PRATA', 'ABC-1234', '1111111111', 'BASICO', 25000, 26000, to_date('01-05-2012', 'dd-mm-yyyy'), to_date('15-06-2012', 'dd-mm-yyyy'), 1, 2);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (2, 2, 1, '1.0', 2012, 2013, 'BRANCA', 'JLB-9985', '1111111111', 'TRIO ELETRICO', 26500, 28000, to_date('20-01-2012', 'dd-mm-yyyy'), to_date('13-02-2012', 'dd-mm-yyyy'), 2, 1);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (3, 2, 1, '1.6 POWER', 2010, 2011, 'PRETA', 'OLP-9856', '1111111111', 'COMPLETO', 28000, 29000, to_date('20-01-2012', 'dd-mm-yyyy'), to_date('25-01-2012', 'dd-mm-yyyy'), 3, 4);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (4, 2, 1, '1.0', 2006, 2007, 'PRETA', 'OLP-9090', '1111111111', 'COMPLETO - AR', 18000, null, to_date('10-02-2012', 'dd-mm-yyyy'), null, 4, null);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (5, 1, 3, '1.0 ELX', 2009, 2010, 'VINHO', 'ERT-1258', '1111111111', 'COMPLETO + RODA DE LIGA', 22000, null, to_date('01-03-2012', 'dd-mm-yyyy'), null, 1, null);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (6, 1, 3, '1.4 ELX', 2010, 2011, 'PRATA', 'OLL-8787', '8787878787', 'COMPLETO', 24000, 26000, to_date('11-05-2012', 'dd-mm-yyyy'), to_date('12-08-2012', 'dd-mm-yyyy'), 1, 2);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (7, 2, 4, '1.0', 2008, 2009, 'PRATA', 'IUY-2121', '9898989898', 'BASICO', 22000, null, to_date('18-07-2012', 'dd-mm-yyyy'), null, 4, null);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (8, 3, 7, '1.0', 2012, 2013, 'BRANCA', 'JDH-1589', '8989898989', 'BASICO', 20000, null, to_date('18-06-2012', 'dd-mm-yyyy'), null, 2, null);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (9, 3, 13, 'LT 1.0', 2012, 2013, 'PRATA', 'POU-9898', '9999999999', 'TRIO ELETRICO', 26000, 27000, to_date('04-04-2012', 'dd-mm-yyyy'), to_date('25-04-2012', 'dd-mm-yyyy'), 3, 1);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (10, 3, 9, '1.0', 2010, 2011, 'PRATA', 'POA-1258', '9999999999', 'BASICO', 18000, null, to_date('08-12-2012', 'dd-mm-yyyy'), null, 1, null);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (11, 4, 22, '1.6 FREESTYLE', 2011, 2012, 'PRETA', 'MUI-8585', '9999999999', 'COMPLETA', 35000, null, to_date('17-08-2012', 'dd-mm-yyyy'), null, 2, null);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (12, 2, 23, '1300 L', 1982, 1982, 'BEGE', 'MDG-8585', '9999999999', 'RESTAURADO, MOTOR NOVO', 3500, 4500, to_date('17-07-2012', 'dd-mm-yyyy'), to_date('19-12-2012', 'dd-mm-yyyy'), 2, 4);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (13, 2, 23, '1600', 1985, 1986, 'BRANCA', 'DUE-8787', '9999999999', null, 3500, null, to_date('07-11-2012', 'dd-mm-yyyy'), null, 4, null);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (14, 7, 18, 'EXS', 2010, 2011, 'PRATA', 'AGE-8898', '9999999999', 'CAMBIO AUTOMATICO', 50000, null, to_date('18-04-2012', 'dd-mm-yyyy'), null, 3, null);
insert into MOV_VEICULOS (COD_MOV_VEICULOS, COD_MARCA, COD_MODELO, VERSAO, ANO_FABRICACAO, ANO_MODELO, COR, PLACA, RENAVAM, OBSERVACOES, VALOR_ENTRADA, VALOR_SAIDA, DATA_ENTRADA, DATA_SAIDA, COD_CLIENTE_ENTRADA, COD_CLIENTE_SAIDA)
values (15, 1, 3, '1.0', 2011, 2012, 'VINHO', 'EDJ-4848', '9999999999', 'BASICO', 21000, 22500, to_date('07-02-2012', 'dd-mm-yyyy'), to_date('08-02-2012', 'dd-mm-yyyy'), 1, 2);


COMMIT;



 
